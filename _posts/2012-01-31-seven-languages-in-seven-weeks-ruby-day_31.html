---
layout: post
title: 'Seven Languages in Seven Weeks: Ruby, Day 3'
date: '2012-01-31T22:11:00.000-08:00'
author: Yevgeniy Brikman
tags:
- Seven Languages in Seven Weeks
- Software Engineering
modified_time: '2012-02-01T00:44:38.173-08:00'
blogger_id: tag:blogger.com,1999:blog-5422014336627804072.post-1047876557696501596
blogger_orig_url: http://brikis98.blogspot.com/2012/01/seven-languages-in-seven-weeks-ruby-day_31.html
---

This is my 3rd day of <a href="http://brikis98.blogspot.com/search/label/Seven%20Languages%20in%20Seven%20Weeks">Ruby in the Seven Languages in Seven Weeks</a> series of posts. You can find <a href="http://brikis98.blogspot.com/2012/01/seven-languages-in-seven-weeks-ruby-day_29.html">the previous day here</a>.<br /><br /><span style="font-size: x-large;"><b>Ruby, Day 3: Thoughts</b></span><br /><br />The third day combines&nbsp;<a href="http://en.wikipedia.org/wiki/Metaprogramming">metaprogramming</a> techniques (<a href="http://www.raulparolari.com/Ruby2/define_method">define_method</a>,&nbsp;<a href="http://technicalpickles.com/posts/using-method_missing-and-respond_to-to-create-dynamic-methods/">method_missing</a>, and&nbsp;<a href="http://ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html">mixins</a>)&nbsp;with what what we learned in the previous chapters (flexible syntax, blocks, yield) to work some magic. Whereas day 1 and 2 showed how Ruby could be more concise and expressive than other languages, this chapter shows some of the capabilities available in Ruby, such as beautiful DSLs and composable designs, that are nearly impossible in stricter languages.<br /><br />I saw small of examples of this when I was working on the&nbsp;<a href="http://resume.linkedinlabs.com/">Resume Builder</a>: the profile data I was fetching from the <a href="http://developer.linkedin.com/">LinkedIn APIs</a> came back as JSON. I wanted to have a nice Ruby class to wrap the JSON data and was able to do this cleanly and concisely using some very simple metaprogramming:<br /><br /><br /><script src="https://gist.github.com/1715263.js?file=LinkedInProfile.rb"></script><br />Instead of defining dozens of getters and setters as in the&nbsp;<a href="http://code.google.com/p/linkedin-j/source/browse/trunk/linkedin-j/core/src/main/java/com/google/code/linkedinapi/schema/impl/PersonImpl.java">LinkedIn API Java Library</a>, I just declared the&nbsp;fields in an array (SIMPLE_PROFILE_FIELDS), looped over them, and used define_method to create the appropriate methods. To be fair, this is kids stuff; if you really want to see metaprogramming shine, take a gander over at&nbsp;<a href="http://guides.rubyonrails.org/active_record_querying.html">ActiveRecord</a>.<br /><br />Of course, with great power comes great big bullet wounds in the foot. Metaprogramming must be used with more a bit more caution than other programming techniques, as chasing down errors in dynamic methods and trying to discern "magic" can be painful.<br /><br /><span style="font-size: x-large;"><b>Ruby, Day 3: Problems</b></span><br /><b><br /></b><br /><b>CSV application</b><br /><br />There was only one problem to solve on this day: modify the CSV application (see the <a href="https://gist.github.com/1715263#file_csv_original.rb">original code here</a>&nbsp;and the <a href="https://gist.github.com/1715263#file_csv_original_output.txt">original output here</a>) to return a CsvRow object. Use method_missing on that CsvRow to return the value for the column given a heading.<br /><br /><br /><script src="https://gist.github.com/1715263.js?file=csv_new.rb"></script><br />Using this sample file: <br /><br /><script src="https://gist.github.com/1715263.js?file=rubycsv.csv"></script><br />The code above will produce the following output: <br /><br /><script src="https://gist.github.com/1715263.js?file=csv_new_output.txt"></script><br /><span style="font-size: x-large;"><b>Moving on</b></span><br /><br />This was the final day in the Ruby chapter. Join me next time as I work my way through a totally new language: <a href="http://iolanguage.com/">Io</a>.